!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.CTS=b()}(this,function(){"use strict";var a=function(){return{}};return new a}),function(a){"function"==typeof define&&define.amd?define(["cts"],a):a(CTS)}(function(a){var b=function(b,c,d,e,f,g){var h;if("undefined"==typeof e&&(e="text/xml"),"undefined"==typeof async&&(async=!0),window&&window.XMLHttpRequest)h=new XMLHttpRequest;else{if(!window||!window.ActiveXObject)return null;var i,j;if(window.ActiveXObject){i=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(j in i)try{return new ActiveXObject(i[j])}catch(k){}}}try{h.open(b,c,async),h.onerror=function(){g(h.status,h.statusText)},h.onreadystatechange=function(){500===h.status||401===h.status||403===h.status||404===h.status?g(h.status,h.statusText):4===h.readyState&&"function"==typeof d&&("text/xml"===e?d(h.responseXML):"text"==e&&d(h.responseText))},"undefined"==typeof f&&null===f||"POST"!==b?h.send():(h.overrideMimeType("multipart/form-data"),h.setRequestHeader("Content-type","application/x-www-form-urlencoded;"),h.send(a.utils.dataEncode(f)))}catch(l){console.error(l)}},c=function(a){return"string"!=typeof a?null:"?"!==a.slice(-1)?a+"?":a},d=function(a){var b="",c=[];return Object.keys(a).forEach(function(b){Array.isArray(a[b])?a[b].forEach(function(a){c.push(encodeURIComponent(b)+"[]="+encodeURIComponent(a))}):c.push(encodeURIComponent(b)+"="+encodeURIComponent(a[b]))}),b=c.join("&").replace(/%20/g,"+")},e=function(a){if("string"==typeof a)var b=a.toLowerCase().match("[a-z]{1}");if(isNaN(a)){if(null!==b&&b[0].length===a.length){var c={a:1,b:2,c:3,d:4,e:5,f:6,g:7,h:8,i:9,j:10,k:11,l:12,m:13,n:14,o:15,p:16,q:17,r:18,s:19,t:20,u:21,v:22,w:23,x:24,y:25,z:26};return c[a]}var d=a.toLowerCase().match("([0-9]*)([a-z]*)([0-9]*)([a-z]*)([0-9]*)");if(null===d)return 0;for(var d=d.map(function(b){return b.length>0&&b!=a?b:void 0}),e=[],f=0;f<d.length;f++)d[f]&&e.push(d[f]);return e}return parseInt(a)},f=function(b,c){for(var d,e,f=!1,g=0;g<=c.length-1;g++){var d=a.utils.parseInt(b[g]),e=a.utils.parseInt(c[g]);if(Array.isArray(d)&&Array.isArray(e)){if(f=a.utils.validPassage(d,e),f===!0)break}else{if(e>d){f=!0;break}if(d>e)break}}return f};a.utils={xhr:b,dataEncode:d,checkEndpoint:c,parseInt:e,validPassage:f}}),function(a){"function"==typeof define&&define.amd?define(["cts"],a):a(CTS)}(function(a){var b=function(a,b){this.options[a].value=b},c=function(){var a={},b=this;return Object.keys(b.options).forEach(function(c){a[c]=b.options[c].value||b.options[c]["default"]}),a},d=function(){return this.options},e=function(b,c){var d=this;"undefined"==typeof c&&(c="text/xml"),a.utils.xhr(d.method,d.endpoint,function(a){"function"==typeof b&&b(a)},c,d.getValues())},f=function(a){return{method:"POST",endpoint:a,options:{xml:{type:"boolean",html:"hidden","default":!0},inline:{type:"boolean",html:"hidden","default":!0},splitting:{type:"boolean",html:"checkbox","default":!0},merging:{type:"boolean",html:"checkbox","default":!1},shifting:{type:"boolean",html:"checkbox","default":!1},text:{type:"text",html:"textarea"},remove_node:{type:"list",html:"input","default":["teiHeader","head","speaker","note","ref"]},go_to_root:{type:"string",html:"input","default":"TEI"},ns:{type:"string",html:"input","default":"http://www.tei-c.org/ns/1.0"}},setValue:b,getValues:c,getOptions:d,send:e}},g=function(a,b,c){if("string"==typeof a){if(a in this._services)return new this._services[a](b,c);throw a+" is Unknown."}};a.service={_services:{"llt.tokenizer":f},"new":g}}),function(a){"function"==typeof define&&define.amd?define(["cts"],a):a(CTS)}(function(a){var b=function(){return this.text},c=function(a){this.text=a},d=function(b,c,d){var e,f=this;if("string"==typeof b)d=a.utils.checkEndpoint(b),b=null;else if("string"==typeof c)d=a.utils.checkEndpoint(c),c=null;else if("string"!=typeof d){if(null===f.endpoint)throw"No endpoint given";d=f.endpoint}"function"!=typeof b&&(b=null),e=d+"request=GetPassage&inv="+f.inventory+"&urn="+f.urn;try{a.utils.xhr("GET",e,function(a){var c=new DOMParser,d=c.parseFromString(a,"text/xml");f.xml=a,f.document=d,b&&b()},"text",null,c)}catch(g){"function"==typeof c&&c(g)}},e=function(){var a,b=this;try{return a=b.getXml("body"),0===a[0].children.length?!1:!0}catch(c){return!1}},f=function(a,b){var c,d=this,e=!1;if(("string"!=typeof b||"xml"!==b&&"string"!==b)&&(b="xml"),"string"!=typeof a?c=d.document:(c=d.document.getElementsByTagName(a),e=!0),"string"===b){var f=new XMLSerializer;return e===!0?[].map.call(c,function(a){return f.serializeToString(a)}).join("\n"):f.serializeToString(c)}return c},g=function(a,g,h){return"string"!=typeof g&&(g=null),"string"!=typeof h&&(h=null),{document:null,xml:null,text:null,urn:a,inventory:h,endpoint:g,retrieve:d,setText:c,getText:b,getXml:f,checkXML:e}};a.Text=g}),function(a){"function"==typeof define&&define.amd?define(["cts"],a):a(CTS)}(function(a){"use strict";function b(a,b,h){var i={};return("undefined"==typeof b||3!==b&&5!==b)&&(b=3),"undefined"==typeof h&&(i.namespace=3===b?"http://chs.harvard.edu/xmlns/cts3/ti":"http://chs.harvard.edu/xmlns/cts"),i.version=b,i.endpoint=a,i.inventories={},i.inventory={},i.setEndpoint=c,i.addInventory=e,i.setInventory=d,i.delInventory=f,i.load=g,i.TextInventory=3===i.version?k:null,i}var c=function(a){"string"==typeof a?this.endpoint=[a]:"array"==typeof a&&(this.endpoint=a)},d=function(a){this.inventory=a},e=function(a,b){if("string"!=typeof a)throw"Name is not a string";this.inventory[a]="undefined"==typeof b?a:b},f=function(a){if(!("string"==typeof a&&a in self.inventory))throw a+" is not in known inventories.";delete self.inventory[a]},g=function(b,c){var b,d=this.endpoint,e=a.utils.xhr,f=this;if("undefined"==typeof c)var c=Object.keys(this.inventory);if("function"==typeof b)var b=b;else var b=null;return e("GET",d+"request=GetCapabilities&inv="+c[0],function(a){f.inventories[c[0]]=new f.TextInventory(a,f.namespace,c[0]),1===c.length?null!==b&&b():(c.shift(),f.load(b,c))}),this},h=function(a,b,c){var d={};return d.type=b,d.descriptions={},d.labels={},d.urn=c+"."+a.getAttribute("projid").split(":")[1],d.citations=[].map.call(a.getElementsByTagName("citation"),function(a){return a.getAttribute("label")||"Unknown"}),[].map.call(a.getElementsByTagName("description"),function(a){d.defaultLangDesc=a.getAttribute("xml:lang"),d.descriptions[d.defaultLangDesc]=a.textContent}),[].map.call(a.getElementsByTagName("label"),function(a){d.defaultLangLabel=a.getAttribute("xml:lang"),d.labels[d.defaultLangLabel]=a.textContent}),d.getDesc=function(a){if("undefined"===a)a=this.defaultLangDesc;else if(!(a in this.descriptions))return this.descriptions[this.defaultLangDesc];return this.descriptions[a]},d.getLabel=function(a){if("undefined"===a)a=this.defaultLangLabel;else if(!(a in this.labels))return this.labels[this.defaultLangLabel];return this.labels[a]},d},i=function(a,b){var c={};return c.label={},c.urn=b+"."+a.getAttribute("projid").split(":")[1],[].map.call(a.getElementsByTagName("title"),function(a){c.defaultLang=a.getAttribute("xml:lang"),c.label[c.defaultLang]=a.textContent}),c.getTitle=function(a){if("undefined"===a)a=this.defaultLang;else if(!(a in this.label))return this.label[this.defaultLang];return this.label[a]},c._Translation=function(a){return h(a,"translation",c.urn)},c._Edition=function(a){return h(a,"edition",c.urn)},c.editions=[].map.call(a.getElementsByTagName("edition"),c._Edition),c.translations=[].map.call(a.getElementsByTagName("translation"),c._Translation),c.texts=c.translations.concat(c.editions),c},j=function(a){var b={};return b.label={},b.urn="urn:cts:"+a.getAttribute("projid"),[].map.call(a.getElementsByTagName("groupname"),function(a){b.defaultLang=a.getAttribute("xml:lang"),b.label[b.defaultLang]=a.textContent}),b.getName=function(a){if("undefined"===a)a=this.defaultLang;else if(!(a in this.label))return this.label[this.defaultLang];return this.label[a]},b._Work=i,b.works=[].map.call(a.getElementsByTagName("work"),function(a){return b._Work(a,b.urn)}),b},k=function(a,b,c){var d,e={};return e.identifier=c,e.namespace=b,d=a.getElementsByTagNameNS(e.namespace,"TextInventory"),e._TextGroup=j,e.textgroups=1==d.length?[].map.call(d[0].getElementsByTagNameNS(e.namespace,"textgroup"),e._TextGroup):[],e.getRaw=function(a,b){"undefined"==typeof b&&(b=!1);var c={};return e.textgroups.forEach(function(d){var e=d.getName(a);c[e]={},d.works.forEach(function(d){var f=d.getTitle(a);c[e][f]={edition:{},translation:{}},d.editions.forEach(function(b){c[e][f].edition[b.getLabel(a)]=b}),d.translations.forEach(function(b){c[e][f].translation[b.getLabel(a)]=b}),b===!0&&(c[e][f].theoretical={},c[e][f].theoretical[f]=d)})}),c},e};a.repository=b}),function(a){"function"==typeof define&&define.amd?define(["cts"],a):a(CTS)}(function(a){"use strict";var b=function(b,c){return"undefined"!=typeof c&&c in a.lang.lexicons||(c="en"),b in a.lang.lexicons[c]?a.lang.lexicons[c][b]:a.lang.lexicons.en[b]};a.lang={get:b,lexicons:{}}}),function(a){"function"==typeof define&&define.amd?define(["cts"],a):a(CTS)}(function(a){"use strict";var b={translation:"Translation",edition:"Edition",theoretical:"Theoretical Work",select:"Select",start_passage:"Beginning of passage",stop_passage:"End of passage",retrieve_passage:"Retrieve passage",loading:"Loading...","llt.tokenizer":"Tokenizer parameters","llt.tokenizer.xml":"XML Formatted input","llt.tokenizer.inline":"?","llt.tokenizer.splitting":"Split Enclytics","llt.tokenizer.merging":"Merge split words","llt.tokenizer.shifting":"Shift Enclytics","llt.tokenizer.text":"Text to tokenize","llt.tokenizer.remove_node":"Nodes to remove from XML","llt.tokenizer.go_to_root":"Name of the root node","llt.tokenizer.ns":"Namespace of the XML"};a.lang.lexicons.en=b});